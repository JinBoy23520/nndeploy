# 视频超分效果对比说明

## 当前问题
双三次插值（bicubic）只是简单的几何放大，**没有 AI 增强**，所以脸部细节不会变清晰。

## 解决方案

### 方案 1：【推荐】脸部超分修复流水线
**文件**: `脸部超分修复.json`

**流程**: 视频解码 → SRResNet(2x) → **GFPGAN(脸部修复)** → 播放

**效果**: 
- ✅ GFPGAN 专门针对脸部进行 AI 修复
- ✅ 可显著改善脸部模糊、噪点、细节丢失
- ✅ CPU 可实时运行（约 15-30 FPS）

**使用条件**:
```bash
# 需要 GFPGAN 模型文件
# 路径: GFPGANv1.4.pth（应该已存在于项目根目录）
```

---

### 方案 2：SRResNet 4倍超分
**文件**: `SRResNet 4倍超分.json`

**流程**: 视频解码 → SRResNet(4x) → 播放

**效果**: 
- ⚠️ 使用双三次插值 4 倍放大
- ✅ 放大效果更明显（640x360 → 2560x1440）
- ⚠️ 仍然只是几何放大，无 AI 增强

---

### 方案 3：下载预训练模型（最佳效果）

**Real-ESRGAN 预训练模型** (需下载):
```bash
# 下载地址（约 17MB）:
https://github.com/xinntao/Real-ESRGAN/releases/download/v0.2.5.0/realesr-general-x4v3.pth

# 保存到:
resources/models/RealESRGAN_x2plus.pth

# 然后使用 RealESRGAN视频超分.json 工作流
```

**SRResNet 预训练模型** (如果有):
```bash
# PyTorch 格式的 SRResNet 权重文件
# 将 model_path_ 设置为模型路径
# scale_ 要与模型匹配（2 或 4）
```

---

## 效果对比

| 方案 | 脸部清晰度 | 速度 | 需要模型 |
|------|------------|------|----------|
| 双三次插值 2x | ⭐ | ⭐⭐⭐⭐⭐ | ❌ |
| 双三次插值 4x | ⭐ | ⭐⭐⭐⭐⭐ | ❌ |
| SRResNet 2x + GFPGAN | ⭐⭐⭐⭐ | ⭐⭐⭐ | GFPGANv1.4.pth |
| Real-ESRGAN 2x | ⭐⭐⭐⭐⭐ | ⭐⭐ | realesr-general-x4v3.pth |
| Real-ESRGAN 4x | ⭐⭐⭐⭐⭐ | ⭐ | realesr-general-x4v3.pth |

---

## 推荐使用

**立即可用（无需下载）**:
1. 打开 `脸部超分修复.json`
2. 选择包含人脸的视频
3. 运行，GFPGAN 会自动增强脸部细节

**效果最佳（需下载模型）**:
1. 下载 Real-ESRGAN 模型（见上方链接）
2. 打开 `RealESRGAN视频超分.json`
3. 设置 `model_path_` 为下载的模型路径
4. 运行

---

## 常见问题

**Q: 为什么双三次插值效果不好？**
A: 双三次插值只是数学上的像素插值，没有学习图像特征，无法恢复丢失的细节。

**Q: GFPGAN 和 Real-ESRGAN 有什么区别？**
A: 
- GFPGAN: 专门针对人脸设计，对脸部细节修复效果极佳
- Real-ESRGAN: 通用超分模型，适用于各种图像（风景、物体、人物）

**Q: 可以同时使用多个模型吗？**
A: 可以！`脸部超分修复.json` 就是先用 SRResNet 放大，再用 GFPGAN 修复脸部。

**Q: 速度太慢怎么办？**
A: 
1. 降低视频分辨率
2. 使用 `tile_` 参数（Real-ESRGAN）
3. 减小 `scale_` 倍数
4. 使用 GPU（如果有）

---

## 模型下载汇总

| 模型 | 大小 | 下载链接 | 效果 |
|------|------|----------|------|
| GFPGANv1.4 | ~348MB | [GitHub](https://github.com/TencentARC/GFPGAN/releases/download/v1.3.0/GFPGANv1.4.pth) | 脸部修复 ⭐⭐⭐⭐ |
| Real-ESRGAN x4 | ~17MB | [GitHub](https://github.com/xinntao/Real-ESRGAN/releases/download/v0.2.5.0/realesr-general-x4v3.pth) | 通用超分 ⭐⭐⭐⭐⭐ |
| RRDBNet x2 | ~17MB | [GitHub](https://github.com/xinntao/Real-ESRGAN/releases/download/v0.1.1/RealESRGAN_x2plus.pth) | 2倍超分 ⭐⭐⭐⭐ |
