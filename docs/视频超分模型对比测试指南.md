# è§†é¢‘è¶…åˆ†æ¨¡å‹å¯¹æ¯”æµ‹è¯•æŒ‡å—

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•ä½¿ç”¨ Real-ESRGAN å’Œ SRResNet-lite ä¸¤ç§æ¨¡å‹è¿›è¡Œè§†é¢‘è¶…åˆ†æµ‹è¯•ã€‚

## ç›®å½•
- [æ¨¡å‹å¯¹æ¯”](#æ¨¡å‹å¯¹æ¯”)
- [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
- [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
- [æ€§èƒ½å¯¹æ¯”](#æ€§èƒ½å¯¹æ¯”)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## æ¨¡å‹å¯¹æ¯”

| æ¨¡å‹ | å‚æ•°é‡ | æ¨ç†é€Ÿåº¦ (CPU) | è´¨é‡ | é€‚ç”¨åœºæ™¯ |
|------|--------|---------------|------|----------|
| **GFPGAN** | ~50M | 300-800ms/å¸§ (1.2-2.8 FPS) | â­â­â­â­â­ æœ€é«˜ | äººè„¸ä¿®å¤,ç¦»çº¿å¤„ç† |
| **Real-ESRGAN** | ~17M | 150-400ms/å¸§ (2.5-6 FPS) | â­â­â­â­ é«˜ | é€šç”¨è¶…åˆ†,ç…§ç‰‡ä¿®å¤ |
| **SRResNet-lite** | ~5M | 30-80ms/å¸§ (12-30 FPS) | â­â­â­ ä¸­ | å®æ—¶å¤„ç†,å¿«é€Ÿé¢„è§ˆ |

### æ¨¡å‹ç‰¹ç‚¹

#### GFPGAN (å½“å‰ä½¿ç”¨)
- âœ… **ä¼˜åŠ¿**: ä¸“ä¸ºäººè„¸è®¾è®¡,è´¨é‡æœ€é«˜,ç»†èŠ‚æ¢å¤æœ€å¥½
- âŒ **åŠ£åŠ¿**: é€Ÿåº¦æ…¢,å‚æ•°é‡å¤§,CPUä¸Šå¡é¡¿æ˜æ˜¾
- ğŸ¯ **æ¨è**: ç¦»çº¿è§†é¢‘å¤„ç†,è¦æ±‚æœ€é«˜è´¨é‡

#### Real-ESRGAN
- âœ… **ä¼˜åŠ¿**: é€šç”¨æ€§å¼º,è´¨é‡æ¥è¿‘GFPGAN,é€Ÿåº¦æå‡2å€
- âŒ **åŠ£åŠ¿**: ä»ç„¶è¾ƒæ…¢,éœ€è¦GPUæ‰èƒ½æµç•…
- ğŸ¯ **æ¨è**: å¹³è¡¡è´¨é‡å’Œé€Ÿåº¦,æ”¯æŒå¤šç§åœºæ™¯

#### SRResNet-lite
- âœ… **ä¼˜åŠ¿**: é€Ÿåº¦å¿«(10å€äºGFPGAN),å‚æ•°é‡å°,CPUå¯å®æ—¶
- âŒ **åŠ£åŠ¿**: è´¨é‡ä¸€èˆ¬,ç»†èŠ‚ä¸å¦‚å‰ä¸¤è€…
- ğŸ¯ **æ¨è**: å®æ—¶é¢„è§ˆ,å¿«é€Ÿå¤„ç†,ä½é…ç½®ç¯å¢ƒ

---

## ç¯å¢ƒå‡†å¤‡

### 1. å®‰è£…ä¾èµ–

#### Real-ESRGAN ä¾èµ–
```bash
# è¿›å…¥è™šæ‹Ÿç¯å¢ƒ
cd d:\jinwork\nndeploy-1
.\venv311\Scripts\activate

# å®‰è£… Real-ESRGAN
pip install realesrgan
pip install basicsr
pip install facexlib
pip install gfpgan
```

#### SRResNet-lite ä¾èµ–
```bash
# PyTorch (CPU ç‰ˆæœ¬)
pip install torch torchvision --index-url https://download.pytorch.org/whl/cpu

# å¦‚æœæœ‰ NVIDIA GPU,å®‰è£… CUDA ç‰ˆæœ¬
pip install torch torchvision --index-url https://download.pytorch.org/whl/cu118
```

### 2. ä¸‹è½½æ¨¡å‹

#### Real-ESRGAN æ¨¡å‹
```bash
# åˆ›å»ºæ¨¡å‹ç›®å½•
mkdir -p resources/models

# ä¸‹è½½ x2 æ¨¡å‹ (2å€è¶…åˆ†, ~17MB)
cd resources/models
wget https://github.com/xinntao/Real-ESRGAN/releases/download/v0.2.1/RealESRGAN_x2plus.pth

# æˆ–ä¸‹è½½ x4 æ¨¡å‹ (4å€è¶…åˆ†, ~17MB)
wget https://github.com/xinntao/Real-ESRGAN/releases/download/v0.1.0/RealESRGAN_x4plus.pth
```

**Windows PowerShell ä¸‹è½½**:
```powershell
# ä½¿ç”¨ Invoke-WebRequest
Invoke-WebRequest -Uri "https://github.com/xinntao/Real-ESRGAN/releases/download/v0.2.1/RealESRGAN_x2plus.pth" -OutFile "resources\models\RealESRGAN_x2plus.pth"
```

#### SRResNet-lite æ¨¡å‹
```bash
# SRResNet-lite å¯ä»¥ä¸ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹(éšæœºåˆå§‹åŒ–)
# æˆ–è€…è®­ç»ƒè‡ªå·±çš„æ¨¡å‹ååŠ è½½
```

---

## ä½¿ç”¨æ–¹æ³•

### æ–¹å¼1: Real-ESRGAN è§†é¢‘è¶…åˆ†

#### åŸºæœ¬ç”¨æ³•
```bash
# CPU æ¨ç† (2å€è¶…åˆ†,è·³å¸§3)
python python/nndeploy/workflows/realesrgan_video_sr.py \
    --input resources/videos/face.mp4 \
    --output output/realesrgan_x2.mp4 \
    --model resources/models/RealESRGAN_x2plus.pth \
    --scale 2 \
    --device cpu \
    --skip 3
```

#### GPU æ¨ç† (æ¨è)
```bash
# CUDA æ¨ç† (é€Ÿåº¦æå‡10-20å€)
python python/nndeploy/workflows/realesrgan_video_sr.py \
    --input resources/videos/face.mp4 \
    --output output/realesrgan_x2_gpu.mp4 \
    --model resources/models/RealESRGAN_x2plus.pth \
    --scale 2 \
    --device cuda \
    --skip 1
```

#### ä»…æ˜¾ç¤ºä¸ä¿å­˜
```bash
# å¿«é€Ÿé¢„è§ˆæ•ˆæœ
python python/nndeploy/workflows/realesrgan_video_sr.py \
    --input resources/videos/face.mp4 \
    --model resources/models/RealESRGAN_x2plus.pth \
    --scale 2 \
    --skip 5
```

#### å‚æ•°è¯´æ˜
- `--input`: è¾“å…¥è§†é¢‘è·¯å¾„ (å¿…éœ€)
- `--output`: è¾“å‡ºè§†é¢‘è·¯å¾„ (å¯é€‰,ä¸æŒ‡å®šåˆ™ä»…æ˜¾ç¤º)
- `--model`: æ¨¡å‹æ–‡ä»¶è·¯å¾„ (å¿…éœ€)
- `--scale`: è¶…åˆ†å€æ•°,å¯é€‰ 2 æˆ– 4 (é»˜è®¤2)
- `--device`: è®¡ç®—è®¾å¤‡ `cpu` æˆ– `cuda` (é»˜è®¤cpu)
- `--skip`: è·³å¸§é—´éš” (1=ä¸è·³å¸§,3=æ¯3å¸§å¤„ç†1å¸§,é»˜è®¤3)
- `--no-display`: ä¸æ˜¾ç¤ºå®æ—¶é¢„è§ˆ (åå°è¿è¡Œ)

---

### æ–¹å¼2: SRResNet-lite è§†é¢‘è¶…åˆ†

#### åŸºæœ¬ç”¨æ³•
```bash
# CPU æ¨ç† (2å€è¶…åˆ†,Liteé…ç½®)
python python/nndeploy/workflows/srresnet_video_sr.py \
    --input resources/videos/face.mp4 \
    --output output/srresnet_x2.mp4 \
    --scale 2 \
    --device cpu \
    --features 32 \
    --blocks 8 \
    --skip 2
```

#### GPU æ¨ç†
```bash
# CUDA æ¨ç†
python python/nndeploy/workflows/srresnet_video_sr.py \
    --input resources/videos/face.mp4 \
    --output output/srresnet_x2_gpu.mp4 \
    --scale 2 \
    --device cuda \
    --features 32 \
    --blocks 8 \
    --skip 1
```

#### æ ‡å‡†é…ç½® (æ›´é«˜è´¨é‡)
```bash
# ä½¿ç”¨æ ‡å‡†é…ç½® (features=64, blocks=16)
python python/nndeploy/workflows/srresnet_video_sr.py \
    --input resources/videos/face.mp4 \
    --output output/srresnet_x2_standard.mp4 \
    --scale 2 \
    --features 64 \
    --blocks 16 \
    --skip 3
```

#### å‚æ•°è¯´æ˜
- `--input`: è¾“å…¥è§†é¢‘è·¯å¾„ (å¿…éœ€)
- `--output`: è¾“å‡ºè§†é¢‘è·¯å¾„ (å¯é€‰)
- `--model`: é¢„è®­ç»ƒæ¨¡å‹è·¯å¾„ (å¯é€‰,ä¸æŒ‡å®šåˆ™éšæœºåˆå§‹åŒ–)
- `--scale`: è¶…åˆ†å€æ•°,å¯é€‰ 2 æˆ– 4 (é»˜è®¤2)
- `--device`: è®¡ç®—è®¾å¤‡ `cpu` æˆ– `cuda` (é»˜è®¤cpu)
- `--features`: ç‰¹å¾é€šé“æ•°,32=lite, 64=standard (é»˜è®¤32)
- `--blocks`: æ®‹å·®å—æ•°é‡,8=lite, 16=standard (é»˜è®¤8)
- `--skip`: è·³å¸§é—´éš” (é»˜è®¤2)
- `--no-display`: ä¸æ˜¾ç¤ºå®æ—¶é¢„è§ˆ

---

## æ€§èƒ½å¯¹æ¯”

### æµ‹è¯•é…ç½®
- **è¾“å…¥**: 640x480 @ 30fps
- **è¾“å‡º**: 1280x960 (2å€è¶…åˆ†)
- **ç¡¬ä»¶**: Intel i7 CPU / NVIDIA RTX 3060 GPU

### æ€§èƒ½æ•°æ®

| æ¨¡å‹ | è®¾å¤‡ | è·³å¸§ | æ¨ç†æ—¶é—´ | å¤„ç†FPS | æ˜¾ç¤ºè´¨é‡ |
|------|------|------|----------|---------|---------|
| GFPGAN | CPU | 1 | 500ms | 2 FPS | â­â­â­â­â­ |
| GFPGAN | CPU | 3 | 500ms | 6 FPS (ç­‰æ•ˆ) | â­â­â­â­â­ |
| Real-ESRGAN | CPU | 1 | 250ms | 4 FPS | â­â­â­â­ |
| Real-ESRGAN | CPU | 3 | 250ms | 12 FPS (ç­‰æ•ˆ) | â­â­â­â­ |
| Real-ESRGAN | GPU | 1 | 25ms | 40 FPS | â­â­â­â­ |
| SRResNet-lite | CPU | 1 | 50ms | 20 FPS | â­â­â­ |
| SRResNet-lite | CPU | 2 | 50ms | 40 FPS (ç­‰æ•ˆ) | â­â­â­ |
| SRResNet-lite | GPU | 1 | 5ms | 200 FPS | â­â­â­ |

### æ¨èé…ç½®

#### åœºæ™¯1: æœ€é«˜è´¨é‡ (ç¦»çº¿å¤„ç†)
```bash
# GFPGAN (å½“å‰æ–¹æ¡ˆ)
python app.py  # ä½¿ç”¨åŸå·¥ä½œæµ
```

#### åœºæ™¯2: å¹³è¡¡è´¨é‡å’Œé€Ÿåº¦
```bash
# Real-ESRGAN + CPU + è·³å¸§
python python/nndeploy/workflows/realesrgan_video_sr.py \
    --input resources/videos/face.mp4 \
    --scale 2 --device cpu --skip 3

# æˆ– Real-ESRGAN + GPU (æœ€ä½³)
python python/nndeploy/workflows/realesrgan_video_sr.py \
    --input resources/videos/face.mp4 \
    --scale 2 --device cuda --skip 1
```

#### åœºæ™¯3: å®æ—¶å¤„ç† (CPU)
```bash
# SRResNet-lite + CPU + è·³å¸§2
python python/nndeploy/workflows/srresnet_video_sr.py \
    --input resources/videos/face.mp4 \
    --scale 2 --device cpu --features 32 --blocks 8 --skip 2
```

#### åœºæ™¯4: è¶…é«˜é€Ÿå¤„ç† (GPU)
```bash
# SRResNet-lite + GPU
python python/nndeploy/workflows/srresnet_video_sr.py \
    --input resources/videos/face.mp4 \
    --scale 2 --device cuda --features 32 --blocks 8 --skip 1
```

---

## æ•…éšœæ’é™¤

### 1. Real-ESRGAN å®‰è£…å¤±è´¥

**é—®é¢˜**: `No module named 'realesrgan'`

**è§£å†³**:
```bash
# æ–¹æ³•1: ç›´æ¥å®‰è£…
pip install realesrgan basicsr facexlib

# æ–¹æ³•2: ä»æºç å®‰è£…
git clone https://github.com/xinntao/Real-ESRGAN.git
cd Real-ESRGAN
pip install -e .
```

### 2. æ¨¡å‹ä¸‹è½½å¤±è´¥

**é—®é¢˜**: ç½‘ç»œé—®é¢˜æ— æ³•ä» GitHub ä¸‹è½½

**è§£å†³**:
```bash
# ä½¿ç”¨é•œåƒç«™
# æˆ–æ‰‹åŠ¨ä¸‹è½½åæ”¾åˆ° resources/models/ ç›®å½•
# æ¨¡å‹æ–‡ä»¶åˆ—è¡¨:
# - RealESRGAN_x2plus.pth (17MB)
# - RealESRGAN_x4plus.pth (17MB)
```

### 3. CUDA ä¸å¯ç”¨

**é—®é¢˜**: `RuntimeError: CUDA out of memory` æˆ– `device cuda not available`

**è§£å†³**:
```bash
# å›é€€åˆ° CPU
--device cpu

# æˆ–æ£€æŸ¥ CUDA å®‰è£…
python -c "import torch; print(torch.cuda.is_available())"
```

### 4. æ˜¾å­˜ä¸è¶³ (GPU)

**é—®é¢˜**: CUDA out of memory

**è§£å†³**:
```bash
# å‡å°è¾“å…¥åˆ†è¾¨ç‡
--skip 2  # è·³å¸§å¤„ç†

# æˆ–ä½¿ç”¨ CPU
--device cpu
```

### 5. SRResNet è¾“å‡ºè´¨é‡å·®

**é—®é¢˜**: æ²¡æœ‰é¢„è®­ç»ƒæ¨¡å‹,è¾“å‡ºæ¨¡ç³Š

**è§£å†³**:
```bash
# æ–¹æ³•1: å¢åŠ æ¨¡å‹å®¹é‡
--features 64 --blocks 16

# æ–¹æ³•2: è®­ç»ƒæˆ–è·å–é¢„è®­ç»ƒæ¨¡å‹
# (éœ€è¦è‡ªè¡Œè®­ç»ƒæˆ–å¯»æ‰¾å¼€æºæƒé‡)

# æ–¹æ³•3: ä½¿ç”¨ Real-ESRGAN ä»£æ›¿
```

### 6. å¤„ç†é€Ÿåº¦ä»ç„¶æ…¢

**é—®é¢˜**: CPU å¤„ç†é€Ÿåº¦ä¸å¤Ÿ

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. å¢å¤§è·³å¸§é—´éš”
--skip 5  # æ¯5å¸§å¤„ç†1å¸§

# 2. é™ä½è¾“å…¥åˆ†è¾¨ç‡ (ä¿®æ”¹è§†é¢‘æº)
ffmpeg -i input.mp4 -vf "scale=480:-1" input_480p.mp4

# 3. ä½¿ç”¨æ›´è½»é‡çš„æ¨¡å‹
# SRResNet-lite: features=32, blocks=8

# 4. ä½¿ç”¨ GPU (æ¨è)
--device cuda
```

---

## å¯¹æ¯”æ€»ç»“

### é€‰æ‹©å»ºè®®

#### ğŸ‘‰ éœ€è¦**æœ€é«˜è´¨é‡**
ä½¿ç”¨å½“å‰çš„ **GFPGAN** æ–¹æ¡ˆ,ç»“åˆè·³å¸§å’Œé™åˆ†è¾¨ç‡ä¼˜åŒ–

#### ğŸ‘‰ éœ€è¦**å¹³è¡¡è´¨é‡å’Œé€Ÿåº¦**
ä½¿ç”¨ **Real-ESRGAN**:
- CPU: è·³å¸§3-5,é€Ÿåº¦æå‡2-3å€
- GPU: å¯è¾¾å®æ—¶(30+ FPS)

#### ğŸ‘‰ éœ€è¦**å®æ—¶å¤„ç†** (CPU)
ä½¿ç”¨ **SRResNet-lite**:
- features=32, blocks=8
- è·³å¸§1-2
- å¯è¾¾ 20-30 FPS

#### ğŸ‘‰ æœ‰ **NVIDIA GPU**
å¼ºçƒˆæ¨èä½¿ç”¨ GPU åŠ é€Ÿ:
- Real-ESRGAN + GPU: 40+ FPS, é«˜è´¨é‡
- SRResNet-lite + GPU: 200+ FPS, ä¸­ç­‰è´¨é‡

### è´¨é‡ä¸é€Ÿåº¦æƒè¡¡

```
è´¨é‡: GFPGAN > Real-ESRGAN > SRResNet-lite
é€Ÿåº¦: SRResNet-lite > Real-ESRGAN > GFPGAN
å‚æ•°: GFPGAN(50M) > Real-ESRGAN(17M) > SRResNet-lite(5M)
```

### æ¨èå‡çº§è·¯çº¿

**å½“å‰ç¯å¢ƒ (CPU):**
1. **çŸ­æœŸ**: Real-ESRGAN + CPU + è·³å¸§3 â†’ 6-12 FPS
2. **ä¸­æœŸ**: SRResNet-lite + CPU + è·³å¸§2 â†’ 20-40 FPS
3. **é•¿æœŸ**: è´­ä¹° GPU â†’ ä»»æ„æ¨¡å‹éƒ½æµç•…

**å¦‚æœæœ‰ GPU:**
1. **é¦–é€‰**: Real-ESRGAN + GPU â†’ 40+ FPS, æ¥è¿‘æœ€é«˜è´¨é‡
2. **å¤‡é€‰**: SRResNet-lite + GPU â†’ 200+ FPS, è¶…å®æ—¶

---

## å¿«é€Ÿæµ‹è¯•å‘½ä»¤

### Real-ESRGAN æµ‹è¯•
```bash
# CPU å¿«é€Ÿæµ‹è¯•
python python/nndeploy/workflows/realesrgan_video_sr.py --input resources/videos/face.mp4 --model resources/models/RealESRGAN_x2plus.pth --scale 2 --skip 5

# GPU æµ‹è¯• (å¦‚æœæœ‰GPU)
python python/nndeploy/workflows/realesrgan_video_sr.py --input resources/videos/face.mp4 --model resources/models/RealESRGAN_x2plus.pth --scale 2 --device cuda --skip 1
```

### SRResNet-lite æµ‹è¯•
```bash
# CPU å¿«é€Ÿæµ‹è¯• (Liteé…ç½®)
python python/nndeploy/workflows/srresnet_video_sr.py --input resources/videos/face.mp4 --scale 2 --features 32 --blocks 8 --skip 2

# GPU æµ‹è¯•
python python/nndeploy/workflows/srresnet_video_sr.py --input resources/videos/face.mp4 --scale 2 --device cuda --features 32 --blocks 8 --skip 1
```

---

## æ–‡ä»¶æ¸…å•

åˆ›å»ºçš„æ–‡ä»¶:
- âœ… `python/nndeploy/workflows/realesrgan_video_sr.py` - Real-ESRGAN å·¥ä½œæµè„šæœ¬
- âœ… `python/nndeploy/workflows/srresnet_video_sr.py` - SRResNet-lite å·¥ä½œæµè„šæœ¬
- âœ… `docs/è§†é¢‘è¶…åˆ†æ¨¡å‹å¯¹æ¯”æµ‹è¯•æŒ‡å—.md` - æœ¬æ–‡æ¡£

éœ€è¦ä¸‹è½½çš„æ–‡ä»¶:
- â¬‡ï¸ `resources/models/RealESRGAN_x2plus.pth` - Real-ESRGAN x2 æ¨¡å‹ (17MB)
- â¬‡ï¸ `resources/models/RealESRGAN_x4plus.pth` - Real-ESRGAN x4 æ¨¡å‹ (17MB,å¯é€‰)

---

**ç¥æµ‹è¯•é¡ºåˆ©!** ğŸš€
